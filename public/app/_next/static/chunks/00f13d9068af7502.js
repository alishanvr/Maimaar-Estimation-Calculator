(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,29736,e=>{"use strict";var t=e.i(9165);async function r(e){let{data:r}=await t.default.get("/projects",{params:e});return r}async function a(e){let{data:r}=await t.default.post("/projects",e);return r.data}async function s(e){let{data:r}=await t.default.get(`/projects/${e}`);return r.data}async function l(e,r){let{data:a}=await t.default.put(`/projects/${e}`,r);return a.data}async function i(e){await t.default.delete(`/projects/${e}`)}async function o(e){let{data:r}=await t.default.get(`/projects/${e}/buildings`);return r.data}async function n(e,r){await t.default.delete(`/projects/${e}/buildings/${r}`)}async function c(e,r){let{data:a}=await t.default.post(`/projects/${e}/buildings/${r}/duplicate`);return a.data}async function d(e){let{data:r}=await t.default.get(`/projects/${e}/history`);return r.data}e.s(["createProject",()=>a,"deleteProject",()=>i,"duplicateBuilding",()=>c,"getProject",()=>s,"getProjectBuildings",()=>o,"getProjectHistory",()=>d,"listProjects",()=>r,"removeBuildingFromProject",()=>n,"updateProject",()=>l])},61351,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(29736);let l=[{label:"All",value:""},{label:"Draft",value:"draft"},{label:"In Progress",value:"in_progress"},{label:"Completed",value:"completed"},{label:"Archived",value:"archived"}],i={draft:"bg-gray-100 text-gray-700",in_progress:"bg-yellow-100 text-yellow-700",completed:"bg-green-100 text-green-700",archived:"bg-blue-100 text-blue-700"};function o(){let e=(0,a.useRouter)(),[o,n]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),[g,y]=(0,r.useState)({project_number:"",project_name:"",customer_name:"",location:""}),{projects:h,meta:j,isLoading:b,error:f,page:N,setPage:v,refetch:w}=function(e,t){let[a,l]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),[n,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(1),x=(0,r.useCallback)(async()=>{o(!0),c(null);try{let r=await (0,s.listProjects)({page:d,status:e||void 0,search:t||void 0});l(r)}catch{c("Failed to load projects.")}finally{o(!1)}},[d,e,t]);return(0,r.useEffect)(()=>{x()},[x]),{projects:a?.data??[],meta:a?.meta??null,isLoading:i,error:n,page:d,setPage:m,refetch:x}}(o,c),_=async()=>{if(g.project_number&&g.project_name){x(!0);try{let t=await (0,s.createProject)(g);p(!1),y({project_number:"",project_name:"",customer_name:"",location:""}),e.push(`/projects/${t.id}`)}catch{alert("Failed to create project.")}finally{x(!1)}}},C=async e=>{if(confirm("Are you sure you want to delete this project?"))try{await (0,s.deleteProject)(e),w()}catch{alert("Failed to delete project.")}},P=(e,t=2)=>null==e?"—":e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t});return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),(0,t.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage multi-building projects"})]}),(0,t.jsx)("button",{onClick:()=>p(!0),className:"bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary/80 transition",children:"+ New Project"})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("input",{type:"text",placeholder:"Search by name, number, or customer...",value:c,onChange:e=>{d(e.target.value),v(1)},className:"w-full max-w-md px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"})}),(0,t.jsx)("div",{className:"flex gap-1 mb-6 bg-gray-100 rounded-lg p-1 w-fit",children:l.map(e=>(0,t.jsx)("button",{onClick:()=>{n(e.value),v(1)},className:`px-4 py-1.5 text-sm rounded-md font-medium transition ${o===e.value?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:e.label},e.value))}),f&&(0,t.jsx)("div",{className:"bg-red-50 text-red-700 text-sm rounded-lg p-3 border border-red-200 mb-4",children:f}),b&&(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:(0,t.jsx)("p",{className:"text-gray-400",children:"Loading projects..."})}),!b&&0===h.length&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[(0,t.jsx)("div",{className:"text-gray-300 text-5xl mb-4",children:"▢"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No projects yet"}),(0,t.jsx)("p",{className:"text-gray-500 mt-2 mb-4",children:"Create your first project to group multiple buildings."}),(0,t.jsx)("button",{onClick:()=>p(!0),className:"bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary/80 transition",children:"+ New Project"})]}),!b&&h.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-200",children:[(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Project #"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Name"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Customer"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Status"}),(0,t.jsx)("th",{className:"text-center px-4 py-3 font-medium text-gray-500",children:"Buildings"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-medium text-gray-500",children:"Weight (MT)"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-medium text-gray-500",children:"Price (AED)"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 font-medium text-gray-500",children:"Date"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 font-medium text-gray-500",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:h.map(r=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>e.push(`/projects/${r.id}`),children:[(0,t.jsx)("td",{className:"px-4 py-3 font-mono text-xs",children:r.project_number}),(0,t.jsx)("td",{className:"px-4 py-3 font-medium text-gray-900",children:r.project_name}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-600",children:r.customer_name||"—"}),(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsx)("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-medium ${i[r.status]}`,children:r.status.replace("_"," ")})}),(0,t.jsx)("td",{className:"px-4 py-3 text-center font-mono text-xs",children:r.summary?.building_count??0}),(0,t.jsx)("td",{className:"px-4 py-3 text-right font-mono text-xs",children:P(r.summary?.total_weight??null,2)}),(0,t.jsx)("td",{className:"px-4 py-3 text-right font-mono text-xs",children:P(r.summary?.total_price??null,0)}),(0,t.jsx)("td",{className:"px-4 py-3 text-gray-500 text-xs",children:r.created_at?.slice(0,10)}),(0,t.jsx)("td",{className:"px-4 py-3 text-right",children:(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),C(r.id)},className:"text-red-500 hover:text-red-700 text-xs font-medium transition",children:"Delete"})})]},r.id))})]}),j&&j.last_page>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-200 bg-gray-50",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing ",j.from,"–",j.to," of ",j.total]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>v(N-1),disabled:N<=1,className:"px-3 py-1 text-sm rounded border border-gray-300 disabled:opacity-50 hover:bg-white transition",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>v(N+1),disabled:N>=j.last_page,className:"px-3 py-1 text-sm rounded border border-gray-300 disabled:opacity-50 hover:bg-white transition",children:"Next"})]})]})]}),u&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"New Project"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Number *"}),(0,t.jsx)("input",{type:"text",value:g.project_number,onChange:e=>y(t=>({...t,project_number:e.target.value})),placeholder:"PRJ-001",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name *"}),(0,t.jsx)("input",{type:"text",value:g.project_name,onChange:e=>y(t=>({...t,project_name:e.target.value})),placeholder:"Warehouse Complex",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),(0,t.jsx)("input",{type:"text",value:g.customer_name,onChange:e=>y(t=>({...t,customer_name:e.target.value})),placeholder:"Acme Corp",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,t.jsx)("input",{type:"text",value:g.location,onChange:e=>y(t=>({...t,location:e.target.value})),placeholder:"Dubai, UAE",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,t.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition",children:"Cancel"}),(0,t.jsx)("button",{onClick:_,disabled:m||!g.project_number||!g.project_name,className:"bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-primary/80 transition disabled:opacity-50",children:m?"Creating...":"Create Project"})]})]})})]})}e.s(["default",()=>o],61351)}]);